{"ast":null,"code":"import _regeneratorRuntime from\"E:/work/DiceWarMint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/work/DiceWarMint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/work/DiceWarMint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"E:/work/DiceWarMint/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4;import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{connect}from\"./redux/blockchain/blockchainActions\";import{fetchData}from\"./redux/data/dataActions\";import*as s from\"./styles/globalStyles\";import styled from\"styled-components\";import i1 from\"./assets/images/1.png\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var StyledButton=styled.button(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 10px;\\n  border-radius: 50px;\\n  border: none;\\n  background-color: #ffffff;\\n  padding: 10px;\\n  font-weight: bold;\\n  color: #000000;\\n  width: 100px;\\n  cursor: pointer;\\n  box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\\n  -webkit-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\\n  -moz-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\\n  :active {\\n    box-shadow: none;\\n    -webkit-box-shadow: none;\\n    -moz-box-shadow: none;\\n  }\\n\"])));export var StyledSmallButton=styled.button(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  padding: 10px;\\n  border-radius: 50px;\\n  border: none;\\n  background-color: #ffffff;\\n  padding: 10px;\\n  font-weight: bold;\\n  color: #000000;\\n  width: 50px;\\n  cursor: pointer;\\n  box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\\n  -webkit-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\\n  -moz-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\\n  :active {\\n    box-shadow: none;\\n    -webkit-box-shadow: none;\\n    -moz-box-shadow: none;\\n  }\\n\"])));export var ResponsiveWrapper=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex: 1;\\n  flex-direction: column;\\n  justify-content: stretched;\\n  align-items: stretched;\\n  width: 100%;\\n  @media (min-width: 767px) {\\n    flex-direction: row;\\n  }\\n\"])));export var StyledImg=styled.img(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  width: 200px;\\n  height: 200px;\\n  @media (min-width: 767px) {\\n    width: 350px;\\n    height: 350px;\\n  }\\n  transition: width 0.5s;\\n  transition: height 0.5s;\\n\"])));function DWTMint(){var dispatch=useDispatch();var blockchain=useSelector(function(state){return state.blockchain;});var data=useSelector(function(state){return state.data;});var _useState=useState(\"Maybe it's your lucky day.\"),_useState2=_slicedToArray(_useState,2),feedback=_useState2[0],setFeedback=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),claimingNft=_useState4[0],setClaimingNft=_useState4[1];//const mintFee = 225;\nvar dwtMintFee=data.newDwtPrice/1000000000000000000;var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),counterAmount=_useState6[0],setCounterAmount=_useState6[1];var incNum=function incNum(){if(counterAmount<20){setCounterAmount(counterAmount+1);}};var decNum=function decNum(){if(counterAmount>1){setCounterAmount(counterAmount-1);}};var redirectTo=function redirectTo(urlInput){window.location.href=urlInput;};var dwtNFTs=function dwtNFTs(_amount){if(_amount<=0){return;}setFeedback(\"Minting your DicewarNFT...\");setClaimingNft(true);var highGasMint=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return blockchain.web3.eth.getGasPrice().then(function(receipt){console.log(receipt);blockchain.smartContract.methods.dwtMint(_amount).send({from:blockchain.account,value:0,gasPrice:parseInt(receipt*1.2)}).once(\"error\",function(err){alert(err.message+\" Page will reload and you can retry connect\");window.location.reload();// setFeedback(\"Sorry, something went wrong please try again later.\");\n// setClaimingNft(false);\n}).then(function(receipt){setFeedback(\"WOW, you now own a DiceWarNFT. go visit Opensea.io to view it.\");setClaimingNft(false);dispatch(fetchData(blockchain.account));});});case 2:case\"end\":return _context.stop();}}},_callee);}));return function highGasMint(){return _ref.apply(this,arguments);};}();highGasMint();};var getData=function getData(){if(blockchain.account!==\"\"&&blockchain.smartContract!==null){dispatch(fetchData(blockchain.account));}};useEffect(function(){getData();},[blockchain.account]);// eslint-disable-line react-hooks/exhaustive-deps\nreturn/*#__PURE__*/_jsx(s.Screen,{style:{backgroundColor:\"var(--black)\"},children:/*#__PURE__*/_jsxs(s.Container,{flex:1,ai:\"center\",style:{padding:24},children:[/*#__PURE__*/_jsx(s.TextTitle,{style:{textAlign:\"center\",fontSize:28,fontWeight:\"bold\"},children:\"Mint a DiceWarNFT with DiceWarToken!\"}),/*#__PURE__*/_jsx(s.SpacerMedium,{}),/*#__PURE__*/_jsxs(s.Container,{ai:\"center\",jc:\"center\",fd:\"row\",children:[/*#__PURE__*/_jsx(StyledButton,{onClick:function onClick(e){e.preventDefault();redirectTo('');},children:\"$MATIC MINT\"}),/*#__PURE__*/_jsx(StyledButton,{onClick:function onClick(e){e.preventDefault();redirectTo('DWTMint');},children:\"$DWT MINT\"})]}),/*#__PURE__*/_jsx(s.SpacerMedium,{}),/*#__PURE__*/_jsxs(ResponsiveWrapper,{flex:1,style:{padding:24},children:[/*#__PURE__*/_jsxs(s.Container,{flex:1,jc:\"center\",ai:\"center\",children:[/*#__PURE__*/_jsx(StyledImg,{alt:\"example\",src:i1}),/*#__PURE__*/_jsx(s.SpacerMedium,{}),/*#__PURE__*/_jsxs(s.TextTitle,{style:{textAlign:\"center\",fontSize:35,fontWeight:\"bold\"},children:[Number(data.mintedTokens)===0?\"Connect to see\":data.mintedTokens,\"/1111\"]})]}),/*#__PURE__*/_jsx(s.SpacerMedium,{}),/*#__PURE__*/_jsx(s.Container,{flex:1,jc:\"center\",ai:\"center\",style:{backgroundColor:\"#383838\",padding:24},children:Number(data.totalSupply)===1111?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(s.TextTitle,{style:{textAlign:\"center\"},children:\"The sale has ended.\"}),/*#__PURE__*/_jsx(s.SpacerSmall,{}),/*#__PURE__*/_jsxs(s.TextDescription,{style:{textAlign:\"center\"},children:[\"You can still find DiceWarNFT on\",\" \",/*#__PURE__*/_jsx(\"a\",{target:\"_blank\",rel:\"noreferrer\",href:\"https://opensea.io/collection/dicewar\",children:\"Opensea.io\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(s.TextTitle,{style:{textAlign:\"center\"},children:[\"Each DiceWarNFT costs \",dwtMintFee,\" DWT.\"]}),/*#__PURE__*/_jsx(s.SpacerXSmall,{}),/*#__PURE__*/_jsx(s.SpacerSmall,{}),/*#__PURE__*/_jsx(s.TextDescription,{style:{textAlign:\"center\"},children:feedback}),/*#__PURE__*/_jsx(s.SpacerMedium,{}),blockchain.account===\"\"||blockchain.smartContract===null?/*#__PURE__*/_jsxs(s.Container,{ai:\"center\",jc:\"center\",children:[/*#__PURE__*/_jsx(s.TextDescription,{style:{textAlign:\"center\"},children:\"Connect to the Polygon network\"}),/*#__PURE__*/_jsx(s.SpacerSmall,{}),/*#__PURE__*/_jsx(StyledButton,{onClick:function onClick(e){e.preventDefault();dispatch(connect());getData();},children:\"CONNECT\"}),blockchain.errorMsg!==\"\"?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(s.SpacerSmall,{}),/*#__PURE__*/_jsx(s.TextDescription,{style:{textAlign:\"center\"},children:blockchain.errorMsg})]}):null]}):/*#__PURE__*/_jsxs(s.Container,{ai:\"center\",jc:\"center\",fd:\"row\",children:[/*#__PURE__*/_jsx(StyledSmallButton,{onClick:decNum,children:\" - \"}),/*#__PURE__*/_jsx(s.TextTitle,{style:{padding:\"16px\",fontSize:\"22px\"},children:counterAmount}),/*#__PURE__*/_jsx(StyledSmallButton,{onClick:incNum,children:\" + \"}),/*#__PURE__*/_jsx(s.SpacerLarge,{}),/*#__PURE__*/_jsx(StyledButton,{disabled:claimingNft?1:0,onClick:function onClick(e){e.preventDefault();dwtNFTs(1);getData();},children:claimingNft?\"BUSY\":\"MINT\"})]})]})})]}),/*#__PURE__*/_jsx(s.SpacerSmall,{}),/*#__PURE__*/_jsxs(s.Container,{jc:\"center\",ai:\"center\",style:{width:\"70%\"},children:[/*#__PURE__*/_jsx(s.TextDescription,{style:{textAlign:\"center\",fontSize:9},children:\"Please make sure you are connected to the right network (Polygon Mainnet) and the correct address. Please note: Once you make the purchase, you cannot undo this action.\"}),/*#__PURE__*/_jsx(s.SpacerSmall,{})]})]})});}export default DWTMint;","map":{"version":3,"sources":["E:/work/DiceWarMint/src/DWTMint.js"],"names":["React","useEffect","useState","useDispatch","useSelector","connect","fetchData","s","styled","i1","StyledButton","button","StyledSmallButton","ResponsiveWrapper","div","StyledImg","img","DWTMint","dispatch","blockchain","state","data","feedback","setFeedback","claimingNft","setClaimingNft","dwtMintFee","newDwtPrice","counterAmount","setCounterAmount","incNum","decNum","redirectTo","urlInput","window","location","href","dwtNFTs","_amount","highGasMint","web3","eth","getGasPrice","then","receipt","console","log","smartContract","methods","dwtMint","send","from","account","value","gasPrice","parseInt","once","err","alert","message","reload","getData","backgroundColor","padding","textAlign","fontSize","fontWeight","e","preventDefault","Number","mintedTokens","totalSupply","errorMsg","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { connect } from \"./redux/blockchain/blockchainActions\";\nimport { fetchData } from \"./redux/data/dataActions\";\nimport * as s from \"./styles/globalStyles\";\nimport styled from \"styled-components\";\nimport i1 from \"./assets/images/1.png\";\n\nexport const StyledButton = styled.button`\n  padding: 10px;\n  border-radius: 50px;\n  border: none;\n  background-color: #ffffff;\n  padding: 10px;\n  font-weight: bold;\n  color: #000000;\n  width: 100px;\n  cursor: pointer;\n  box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\n  -webkit-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\n  -moz-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\n  :active {\n    box-shadow: none;\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n  }\n`;\n\nexport const StyledSmallButton = styled.button`\n  padding: 10px;\n  border-radius: 50px;\n  border: none;\n  background-color: #ffffff;\n  padding: 10px;\n  font-weight: bold;\n  color: #000000;\n  width: 50px;\n  cursor: pointer;\n  box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\n  -webkit-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\n  -moz-box-shadow: 0px 6px 0px -2px rgba(250, 250, 250, 0.3);\n  :active {\n    box-shadow: none;\n    -webkit-box-shadow: none;\n    -moz-box-shadow: none;\n  }\n`;\n\nexport const ResponsiveWrapper = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  justify-content: stretched;\n  align-items: stretched;\n  width: 100%;\n  @media (min-width: 767px) {\n    flex-direction: row;\n  }\n`;\n\nexport const StyledImg = styled.img`\n  width: 200px;\n  height: 200px;\n  @media (min-width: 767px) {\n    width: 350px;\n    height: 350px;\n  }\n  transition: width 0.5s;\n  transition: height 0.5s;\n`;\n\nfunction DWTMint() {\n  const dispatch = useDispatch();\n  const blockchain = useSelector((state) => state.blockchain);\n  const data = useSelector((state) => state.data);\n  const [feedback, setFeedback] = useState(\"Maybe it's your lucky day.\");\n  const [claimingNft, setClaimingNft] = useState(false);\n  //const mintFee = 225;\n  const dwtMintFee = data.newDwtPrice/ 1000000000000000000;\n\n  const [counterAmount, setCounterAmount] = useState(1);\n  const incNum = () => {\n    if (counterAmount < 20) {\n      setCounterAmount(counterAmount+1);\n    }\n  }\n  const decNum = () => {\n    if (counterAmount > 1) {\n      setCounterAmount(counterAmount-1);\n    }\n  }\n\n  const redirectTo = (urlInput) => {\n    window.location.href = urlInput;\n  };\n\n  const dwtNFTs = (_amount) => {\n    if (_amount <= 0) {\n      return;\n    }\n    setFeedback(\"Minting your DicewarNFT...\");\n    setClaimingNft(true);\n    const highGasMint = async() => {\n      await blockchain.web3.eth.getGasPrice()\n      .then((receipt)=>{\n        console.log(receipt)\n        blockchain.smartContract.methods\n        .dwtMint(_amount)\n        .send({\n          from: blockchain.account,\n          value: 0,\n          gasPrice : parseInt(receipt * 1.2 ) \n        })\n        .once(\"error\", (err) => {\n          alert(err.message + \" Page will reload and you can retry connect\");\n          window.location.reload();\n          // setFeedback(\"Sorry, something went wrong please try again later.\");\n          // setClaimingNft(false);\n        })\n        .then((receipt) => {\n          setFeedback(\n            \"WOW, you now own a DiceWarNFT. go visit Opensea.io to view it.\"\n          );\n          setClaimingNft(false);\n          dispatch(fetchData(blockchain.account));\n        });\n      });\n    }\n    highGasMint()\n\n  };\n\n  const getData = () => {\n    if (blockchain.account !== \"\" && blockchain.smartContract !== null) {\n      dispatch(fetchData(blockchain.account));\n    }\n  };\n\n  useEffect(() => {\n    getData();\n  }, [blockchain.account]);// eslint-disable-line react-hooks/exhaustive-deps\n\n  return (\n    <s.Screen style={{ backgroundColor: \"var(--black)\" }}>\n      <s.Container flex={1} ai={\"center\"} style={{ padding: 24 }}>\n        <s.TextTitle\n          style={{ textAlign: \"center\", fontSize: 28, fontWeight: \"bold\" }}\n        >\n          Mint a DiceWarNFT with DiceWarToken!\n        </s.TextTitle>\n        <s.SpacerMedium />\n        <s.Container ai={\"center\"} jc={\"center\"} fd={\"row\"}>\n\n          <StyledButton onClick={(e) => {\n                e.preventDefault();\n                redirectTo('')}}>$MATIC MINT</StyledButton>\n          <StyledButton onClick={(e) => {\n                e.preventDefault();\n                redirectTo('DWTMint')}}>$DWT MINT</StyledButton>\n        </s.Container>\n        <s.SpacerMedium />\n        <ResponsiveWrapper flex={1} style={{ padding: 24 }}>\n          <s.Container flex={1} jc={\"center\"} ai={\"center\"}>\n            <StyledImg alt={\"example\"} src={i1} />\n            <s.SpacerMedium />\n            <s.TextTitle\n              style={{ textAlign: \"center\", fontSize: 35, fontWeight: \"bold\" }}\n            >\n              {Number(data.mintedTokens) === 0 ? \"Connect to see\" : data.mintedTokens}/1111\n            </s.TextTitle>\n          </s.Container>\n          <s.SpacerMedium />\n          <s.Container\n            flex={1}\n            jc={\"center\"}\n            ai={\"center\"}\n            style={{ backgroundColor: \"#383838\", padding: 24 }}\n          >\n            {Number(data.totalSupply) === 1111 ? (\n              <>\n                <s.TextTitle style={{ textAlign: \"center\" }}>\n                  The sale has ended.\n                </s.TextTitle>\n                <s.SpacerSmall />\n                <s.TextDescription style={{ textAlign: \"center\" }}>\n                  You can still find DiceWarNFT on{\" \"}\n                  <a\n                    target={\"_blank\"}\n                    rel={\"noreferrer\"}\n                    href={\"https://opensea.io/collection/dicewar\"}\n                  >\n                    Opensea.io\n                  </a>\n                </s.TextDescription>\n              </>\n            ) : (\n              <>\n                <s.TextTitle style={{ textAlign: \"center\" }}>\n                  Each DiceWarNFT costs { dwtMintFee } DWT.\n                </s.TextTitle>\n                <s.SpacerXSmall />\n                <s.SpacerSmall />\n                <s.TextDescription style={{ textAlign: \"center\" }}>\n                  {feedback}\n                </s.TextDescription>\n                <s.SpacerMedium />\n\n                {blockchain.account === \"\" ||\n                blockchain.smartContract === null ? (\n                  <s.Container ai={\"center\"} jc={\"center\"}>\n                    <s.TextDescription style={{ textAlign: \"center\" }}>\n                      Connect to the Polygon network\n                    </s.TextDescription>\n                    <s.SpacerSmall />\n                    <StyledButton\n                      onClick={(e) => {\n                        e.preventDefault();\n                        dispatch(connect());\n                        getData();\n                      }}\n                    >\n                      CONNECT\n                    </StyledButton>\n                    {blockchain.errorMsg !== \"\" ? (\n                      <>\n                        <s.SpacerSmall />\n                        <s.TextDescription style={{ textAlign: \"center\" }}>\n                          {blockchain.errorMsg}\n                        </s.TextDescription>\n                      </>\n                    ) : null}\n                  </s.Container>\n                ) : (\n                  \n                  <s.Container ai={\"center\"} jc={\"center\"} fd={\"row\"}>\n                    <StyledSmallButton onClick={decNum}> - </StyledSmallButton>\n                    <s.TextTitle style={{padding:\"16px\", fontSize:\"22px\"}}>{counterAmount}</s.TextTitle>\n                    <StyledSmallButton onClick={incNum}> + </StyledSmallButton>\n                <s.SpacerLarge />\n                    <StyledButton\n                      disabled={claimingNft ? 1 : 0}\n                      onClick={(e) => {\n                        e.preventDefault();\n                        dwtNFTs(1);\n                        getData();\n                      }}\n                    >\n                      {claimingNft ? \"BUSY\" : \"MINT\"}\n                    </StyledButton>\n                  </s.Container>\n                )}\n              </>\n            )}\n          </s.Container>\n        </ResponsiveWrapper>\n        <s.SpacerSmall />\n        <s.Container jc={\"center\"} ai={\"center\"} style={{ width: \"70%\" }}>\n          <s.TextDescription style={{ textAlign: \"center\", fontSize: 9 }}>\n            Please make sure you are connected to the right network (Polygon\n            Mainnet) and the correct address. Please note: Once you make the\n            purchase, you cannot undo this action.\n          </s.TextDescription>\n          <s.SpacerSmall />\n        </s.Container>\n      </s.Container>\n    </s.Screen>\n  );\n}\n\nexport default DWTMint;\n"]},"metadata":{},"sourceType":"module"}